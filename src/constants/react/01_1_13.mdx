---
title: "useReducer"
description: "ì»´í¬ë„ŒíŠ¸ì— ë¦¬ë“€ì„œë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” React Hook"
---

import { Alert, AlertTitle, AlertDescription } from "@/components/ui/alert"
import { Card, CardHeader, CardTitle, CardDescription, CardContent } from "@/components/ui/card"
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs"

<Card className="mb-6">
  <CardHeader>
    <CardTitle>useReducerë€?</CardTitle>
    <CardDescription>
      ë³µì¡í•œ ìƒíƒœ ë¡œì§ì„ ë¦¬ë“€ì„œ í•¨ìˆ˜ë¡œ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” React Hookì…ë‹ˆë‹¤.
    </CardDescription>
  </CardHeader>
  <CardContent>
    ```tsx
    const [state, dispatch] = useReducer(reducer, initialArg, init?)
    ```
  </CardContent>
</Card>

## API ë ˆí¼ëŸ°ìŠ¤

### ë§¤ê°œë³€ìˆ˜

<Card className="mb-4">
  <CardContent className="space-y-4">
    - **reducer**: ìƒíƒœ ì—…ë°ì´íŠ¸ ë°©ë²•ì„ ì§€ì •í•˜ëŠ” ë¦¬ë“€ì„œ í•¨ìˆ˜
    - **initialArg**: ì´ˆê¸° ìƒíƒœë¥¼ ê³„ì‚°í•˜ê¸° ìœ„í•œ ê°’
    - **init?**: (ì„ íƒì ) ì´ˆê¸° ìƒíƒœë¥¼ ë°˜í™˜í•˜ëŠ” ì´ˆê¸°í™” í•¨ìˆ˜
  </CardContent>
</Card>

### ë°˜í™˜ê°’

<Card className="mb-4">
  <CardContent className="space-y-4">
    1. **state**: í˜„ì¬ ìƒíƒœ ê°’
    2. **dispatch**: ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ê³  ë¦¬ë Œë”ë§ì„ íŠ¸ë¦¬ê±°í•˜ëŠ” í•¨ìˆ˜
  </CardContent>
</Card>

## ê¸°ë³¸ ì‚¬ìš©ë²•

### ë¦¬ë“€ì„œ ì¶”ê°€í•˜ê¸°

```tsx
import { useReducer } from 'react';

// ë¦¬ë“€ì„œ í•¨ìˆ˜ ì •ì˜
function reducer(state, action) {
  switch (action.type) {
    case 'incremented_age': {
      return {
        ...state,
        age: state.age + 1
      };
    }
    case 'changed_name': {
      return {
        ...state,
        name: action.nextName
      };
    }
    default: {
      throw Error('Unknown action: ' + action.type);
    }
  }
}

function MyComponent() {
  const [state, dispatch] = useReducer(reducer, { age: 42 });
  
  return (
    <button onClick={() => {
      dispatch({ type: 'incremented_age' });
    }}>
      ë‚˜ì´ ì¦ê°€
    </button>
  );
}
```

## ë¦¬ë“€ì„œ ì‘ì„± ê°€ì´ë“œ

<Tabs defaultValue="structure" className="w-full">
  <TabsList>
    <TabsTrigger value="structure">ê¸°ë³¸ êµ¬ì¡°</TabsTrigger>
    <TabsTrigger value="actions">ì•¡ì…˜ ì„¤ê³„</TabsTrigger>
  </TabsList>
  
  <TabsContent value="structure">
    ```tsx
    function reducer(state, action) {
      switch (action.type) {
        case 'some_action': {
          // í•­ìƒ ìƒˆë¡œìš´ ìƒíƒœ ê°ì²´ë¥¼ ë°˜í™˜
          return {
            ...state,
            // ì—…ë°ì´íŠ¸ëœ í•„ë“œ
          };
        }
        // ë‹¤ë¥¸ ì¼€ì´ìŠ¤ë“¤...
        default: {
          throw Error('Unknown action: ' + action.type);
        }
      }
    }
    ```
  </TabsContent>
  
  <TabsContent value="actions">
    ```tsx
    // ì•¡ì…˜ ê°ì²´ ì˜ˆì‹œ
    dispatch({
      type: 'changed_name',     // ìˆ˜í–‰í•  ì‘ì—… ì‹ë³„
      nextName: 'ìƒˆë¡œìš´ ì´ë¦„'    // í•„ìš”í•œ ì¶”ê°€ ë°ì´í„°
    });

    dispatch({
      type: 'item_added',
      item: {
        id: nextId++,
        text: text
      }
    });
    ```
  </TabsContent>
</Tabs>

<Alert className="mt-6" variant="destructive">
  <AlertTitle>ì£¼ì˜ì‚¬í•­</AlertTitle>
  <AlertDescription>
    1. ìƒíƒœëŠ” ì½ê¸° ì „ìš©ì…ë‹ˆë‹¤. ê°ì²´ë‚˜ ë°°ì—´ì„ ì§ì ‘ ìˆ˜ì •í•˜ì§€ ë§ˆì„¸ìš”.
    2. ë¦¬ë“€ì„œ í•¨ìˆ˜ëŠ” ìˆœìˆ˜ í•¨ìˆ˜ì—¬ì•¼ í•©ë‹ˆë‹¤.
    3. ê° ì¼€ì´ìŠ¤ì—ì„œ í•­ìƒ ìƒˆë¡œìš´ ìƒíƒœ ê°ì²´ë¥¼ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤.
  </AlertDescription>
</Alert>

## ì¼ë°˜ì ì¸ ì‚¬ìš© ì˜ˆì œ

### í¼ ìƒíƒœ ê´€ë¦¬

<Card className="mb-6">
  <CardContent>
    ```tsx
    function formReducer(state, action) {
      switch (action.type) {
        case 'changed_name': {
          return {
            ...state,
            name: action.nextName
          };
        }
        case 'changed_age': {
          return {
            ...state,
            age: action.nextAge
          };
        }
      }
    }

    function Form() {
      const [state, dispatch] = useReducer(formReducer, {
        name: '',
        age: 0
      });

      return (
        <>
          <input
            value={state.name}
            onChange={e => {
              dispatch({
                type: 'changed_name',
                nextName: e.target.value
              });
            }}
          />
          <button onClick={() => {
            dispatch({
              type: 'changed_age',
              nextAge: state.age + 1
            });
          }}>
            ë‚˜ì´ ì¦ê°€
          </button>
        </>
      );
    }
    ```
  </CardContent>
</Card>

### í•  ì¼ ëª©ë¡ ê´€ë¦¬

<Tabs defaultValue="basic" className="w-full">
  <TabsList>
    <TabsTrigger value="basic">ê¸°ë³¸ êµ¬í˜„</TabsTrigger>
    <TabsTrigger value="immer">Immer ì‚¬ìš©</TabsTrigger>
  </TabsList>
  
  <TabsContent value="basic">
    ```tsx
    function todosReducer(tasks, action) {
      switch (action.type) {
        case 'added': {
          return [...tasks, {
            id: action.id,
            text: action.text,
            done: false
          }];
        }
        case 'deleted': {
          return tasks.filter(t => t.id !== action.id);
        }
        case 'toggled': {
          return tasks.map(t => {
            if (t.id === action.id) {
              return { ...t, done: !t.done };
            }
            return t;
          });
        }
      }
    }
    ```
  </TabsContent>
  
  <TabsContent value="immer">
    ```tsx
    import { useImmerReducer } from 'use-immer';

    function todosReducer(draft, action) {
      switch (action.type) {
        case 'added': {
          draft.push({
            id: action.id,
            text: action.text,
            done: false
          });
          break;
        }
        case 'toggled': {
          const todo = draft.find(t => t.id === action.id);
          todo.done = !todo.done;
          break;
        }
      }
    }
    ```
  </TabsContent>
</Tabs>

## ì´ˆê¸° ìƒíƒœ ìµœì í™”

### ì´ˆê¸°í™” í•¨ìˆ˜ ì‚¬ìš©

<Card className="mb-6">
  <CardHeader>
    <CardTitle>ì´ˆê¸° ìƒíƒœ ê³„ì‚° ìµœì í™”</CardTitle>
  </CardHeader>
  <CardContent>
    ```tsx
    // âœ… ì´ˆê¸°í™” í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œ ë°©ì‹
    function createInitialTodos(username) {
      return [
        { text: `${username}ì˜ í•  ì¼ 1`, completed: false },
        { text: `${username}ì˜ í•  ì¼ 2`, completed: false }
      ];
    }

    function TodoList({ username }) {
      const [todos, dispatch] = useReducer(
        todosReducer,
        username,              // ì´ˆê¸°í™” í•¨ìˆ˜ì— ì „ë‹¬ë  ì¸ì
        createInitialTodos     // ì´ˆê¸°í™” í•¨ìˆ˜
      );
      // ...
    }

    // ğŸ”´ í”¼í•´ì•¼ í•  ë°©ì‹: ë§¤ ë Œë”ë§ë§ˆë‹¤ ì´ˆê¸° ìƒíƒœ ì¬ìƒì„±
    const [todos, dispatch] = useReducer(
      todosReducer,
      createInitialTodos(username) // ë§¤ ë Œë”ë§ë§ˆë‹¤ í˜¸ì¶œë¨
    );
    ```
  </CardContent>
</Card>

### ê²Œìœ¼ë¥¸ ì´ˆê¸°í™”

```tsx
function TodoList({ username }) {
  const [state, dispatch] = useReducer(reducer, null, () => {
    // localStorage ì ‘ê·¼ ê°™ì€ ë¹„ìš©ì´ í° ì‘ì—…ì€
    // ì´ˆê¸°í™” í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ìˆ˜í–‰
    const savedTodos = loadFromLocalStorage('todos');
    return savedTodos ?? createInitialTodos(username);
  });
  // ...
}
```

<Alert className="mt-6">
  <AlertTitle>ì„±ëŠ¥ íŒ</AlertTitle>
  <AlertDescription>
    1. ì´ˆê¸°í™” ë¡œì§ì´ ë³µì¡í•˜ê±°ë‚˜ ë¹„ìš©ì´ í° ê²½ìš° ì´ˆê¸°í™” í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.
    2. ì´ˆê¸°í™” í•¨ìˆ˜ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒ ë§ˆìš´íŠ¸ë  ë•Œë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤.
    3. ì´ˆê¸°í™” í•¨ìˆ˜ì—ëŠ” ìˆœìˆ˜í•˜ì§€ ì•Šì€ ì—°ì‚°(ì˜ˆ: localStorage ì ‘ê·¼)ë„ í¬í•¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  </AlertDescription>
</Alert>

## ì¼ë°˜ì ì¸ ë¬¸ì œ í•´ê²°

### ìƒíƒœ ì—…ë°ì´íŠ¸ê°€ ë°˜ì˜ë˜ì§€ ì•ŠëŠ” ê²½ìš°

<Card className="mb-6">
  <CardHeader>
    <CardTitle>ë””ìŠ¤íŒ¨ì¹˜ í›„ ì´ì „ ìƒíƒœ ê°’ì´ ì¶œë ¥ë˜ëŠ” ê²½ìš°</CardTitle>
  </CardHeader>
  <CardContent>
    ```tsx
    // ğŸ”´ ì˜ëª»ëœ ì˜ˆ: dispatchëŠ” ì¦‰ì‹œ ìƒíƒœë¥¼ ë³€ê²½í•˜ì§€ ì•ŠìŒ
    function handleClick() {
      dispatch({ type: 'incremented_age' });
      console.log(state.age); // ì—¬ì „íˆ ì´ì „ ê°’
    }

    // âœ… ë‹¤ìŒ ìƒíƒœ ì˜ˆì¸¡ì´ í•„ìš”í•œ ê²½ìš°
    function handleClick() {
      const action = { type: 'incremented_age' };
      dispatch(action);
      // ë¦¬ë“€ì„œë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ì—¬ ë‹¤ìŒ ìƒíƒœ ê³„ì‚°
      const nextState = reducer(state, action);
      console.log(nextState.age);
    }
    ```
  </CardContent>
</Card>

### í™”ë©´ì´ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠëŠ” ê²½ìš°

<Tabs defaultValue="problem" className="w-full">
  <TabsList>
    <TabsTrigger value="problem">ë¬¸ì œ</TabsTrigger>
    <TabsTrigger value="solution">í•´ê²°</TabsTrigger>
  </TabsList>
  
  <TabsContent value="problem">
    ```tsx
    function reducer(state, action) {
      switch (action.type) {
        case 'added_todo': {
          // ğŸ”´ ì˜ëª»ëœ ì˜ˆ: ìƒíƒœ ì§ì ‘ ë³€ê²½
          state.todos.push(action.todo);
          return state;
        }
      }
    }
    ```
  </TabsContent>
  
  <TabsContent value="solution">
    ```tsx
    function reducer(state, action) {
      switch (action.type) {
        case 'added_todo': {
          // âœ… ìƒˆë¡œìš´ ê°ì²´ ë°˜í™˜
          return {
            ...state,
            todos: [...state.todos, action.todo]
          };
        }
      }
    }
    ```
  </TabsContent>
</Tabs>

### ìƒíƒœì˜ ì¼ë¶€ê°€ undefinedê°€ ë˜ëŠ” ê²½ìš°

```tsx
// ğŸ”´ ì˜ëª»ëœ ì˜ˆ: ê¸°ì¡´ í•„ë“œ ë³µì‚¬ ëˆ„ë½
function reducer(state, action) {
  switch (action.type) {
    case 'incremented_age': {
      return {
        age: state.age + 1 // name í•„ë“œê°€ ì‚¬ë¼ì§
      };
    }
  }
}

// âœ… ì˜¬ë°”ë¥¸ ì˜ˆ: ê¸°ì¡´ ìƒíƒœ ë³µì‚¬ í›„ ì—…ë°ì´íŠ¸
function reducer(state, action) {
  switch (action.type) {
    case 'incremented_age': {
      return {
        ...state,
        age: state.age + 1
      };
    }
  }
}
```

<Alert className="mt-6 mb-6" variant="destructive">
  <AlertTitle>Too many re-renders ì˜¤ë¥˜</AlertTitle>
  <AlertDescription>
    ë Œë”ë§ ì¤‘ì— dispatchë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ë©´ ë¬´í•œ ë£¨í”„ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
    ```tsx
    // ğŸ”´ ì˜ëª»ëœ ì˜ˆ: ë Œë”ë§ ì¤‘ ì§ì ‘ í˜¸ì¶œ
    <button onClick={handleClick()}>í´ë¦­</button>

    // âœ… ì˜¬ë°”ë¥¸ ì˜ˆ: ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¡œ ì „ë‹¬
    <button onClick={handleClick}>í´ë¦­</button>
    ```
  </AlertDescription>
</Alert>

## ê°œë°œ ëª¨ë“œì—ì„œì˜ ë™ì‘

<Card className="mb-6">
  <CardHeader>
    <CardTitle>ë¦¬ë“€ì„œê°€ ë‘ ë²ˆ ì‹¤í–‰ë˜ëŠ” ê²½ìš°</CardTitle>
  </CardHeader>
  <CardContent>
    Strict Modeì—ì„œëŠ” ë¦¬ë“€ì„œì™€ ì´ˆê¸°í™” í•¨ìˆ˜ê°€ ë‘ ë²ˆ í˜¸ì¶œë©ë‹ˆë‹¤:
    
    1. ìˆœìˆ˜ í•¨ìˆ˜ì¸ì§€ í™•ì¸í•˜ê¸° ìœ„í•œ ê°œë°œ ëª¨ë“œ ì „ìš© ë™ì‘
    2. í”„ë¡œë•ì…˜ì—ì„œëŠ” í•œ ë²ˆë§Œ ì‹¤í–‰ë¨
    3. ë¦¬ë“€ì„œê°€ ìˆœìˆ˜í•˜ë‹¤ë©´ ë™ì‘ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŒ

    ```tsx
    // âœ… ìˆœìˆ˜í•œ ë¦¬ë“€ì„œ í•¨ìˆ˜
    function reducer(state, action) {
      switch (action.type) {
        case 'added_todo': {
          return {
            ...state,
            todos: [...state.todos, action.todo]
          };
        }
      }
    }
    ```
  </CardContent>
</Card>

## ëª¨ë²” ì‚¬ë¡€

<Card className="mt-6">
  <CardContent className="space-y-4">
    1. **ì•¡ì…˜ íƒ€ì… ìƒìˆ˜í™”**:
       ```tsx
       const TODO_ACTIONS = {
         ADD: 'todo/add',
         TOGGLE: 'todo/toggle',
         DELETE: 'todo/delete'
       };
       ```

    2. **ì•¡ì…˜ ìƒì„±ì í•¨ìˆ˜ ì‚¬ìš©**:
       ```tsx
       function addTodo(text) {
         return {
           type: TODO_ACTIONS.ADD,
           todo: { id: nextId++, text, completed: false }
         };
       }
       ```

    3. **switch ë¬¸ì—ì„œ ë¸”ë¡ ìŠ¤ì½”í”„ ì‚¬ìš©**:
       ```tsx
       case 'some_action': {
         // ë¸”ë¡ ìŠ¤ì½”í”„ë¡œ ë³€ìˆ˜ ì¶©ëŒ ë°©ì§€
         const newValue = calculate();
         return { ...state, value: newValue };
       }
       ```
  </CardContent>
</Card>